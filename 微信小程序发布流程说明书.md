# 微信小程序发布流程步骤说明书

## 快速概览

### 简化发布流程图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        微信小程序发布完整流程                              │
└─────────────────────────────────────────────────────────────────────────┘

┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│ 第一步   │───▶│ 第二步   │───▶│ 第三步   │───▶│ 第四步   │───▶│ 第五步   │
│ 注册账号 │    │ 开发调试 │    │ 完善信息 │    │ 代码上传 │    │ 提交审核 │
└──────────┘    └──────────┘    └──────────┘    └──────────┘    └──────────┘
      │               │               │               │               │
      ▼               ▼               ▼               ▼               ▼
  15-30分钟      视开发进度       10-30分钟       5-10分钟       1-7个工作日
  完成注册      自定义时长       完成配置       完成上传       等待审核

                               │               │
                               ▼               ▼
                          ┌──────────┐    ┌──────────┐
                          │ 第六步   │    │ 第七步   │
                          │ 审核通过 │    │ 发布上线 │
                          └──────────┘    └──────────┘
                               │               │
                               ▼               ▼
                          即时通知       立即生效
                          可发布版本     用户可访问
```

### 核心步骤速查表

| 步骤 | 操作内容 | 预计时间 | 关键要点 |
|------|---------|---------|---------|
| 1 | 注册小程序账号 | 15-30分钟 | 使用未绑定邮箱，选择主体类型 |
| 2 | 下载开发者工具 | 5分钟 | 官网下载，扫码登录 |
| 3 | 获取 AppID | 即时 | 公众平台查看 |
| 4 | 开发调试 | 自定义 | 本地模拟器+真机测试 |
| 5 | 完善信息 | 10-30分钟 | 名称、图标、类目、简介 |
| 6 | 配置域名 | 10分钟 | 如需网络请求 |
| 7 | 上传代码 | 5-10分钟 | 填写版本号 |
| 8 | 提交审核 | 1-7工作日 | 填写测试账号 |
| 9 | 发布上线 | 即时 | 确认后发布 |

### 最小化发布路径（仅需 5 步）

如果已有账号，直接开始开发：

```
步骤1: 开发调试小程序 ──▶ 步骤2: 完善基本信息 ──▶ 步骤3: 上传代码
        │                        │                      │
        ▼                        ▼                      ▼
   完成功能开发              名称+图标+类目           填写版本号

        │                        │                      │
        ▼                        ▼                      ▼
步骤4: 提交审核  ─────────▶  步骤5:  发布上线
        │
        ▼
   1-7个工作日审核
        │
        ▼
   审核通过后发布
```

## 第一章 准备工作

### 1.1 注册小程序账号

首先需要注册一个微信小程序账号。具体操作步骤如下：

第一步，访问微信公众平台官方网站。打开浏览器，输入网址 https://mp.weixin.qq.com，进入微信公众平台首页。

第二步，点击「立即注册」按钮。在页面右上角找到并点击「立即注册」，进入注册页面。

第三步，选择注册类型。在注册页面中，选择「小程序」作为注册类型。

第四步，填写注册信息。需要使用未绑定过微信公众平台、微信开放平台、个人微信的邮箱进行注册。填写邮箱后，系统会发送激活邮件，需要登录邮箱点击激活链接完成验证。

第五步，信息登记。选择主体类型为「个人」或「企业/组织」，并填写相应的主体信息。个人开发者需要填写身份证信息；企业需要填写营业执照等企业信息。

第六步，完成注册。提交信息后，等待微信团队审核。个人主体小程序通常审核较快，企业主体可能需要更长时间。

### 1.2 下载开发工具

微信小程序开发需要使用官方提供的开发者工具。具体操作步骤如下：

**操作步骤：**

1. **访问下载页面**
   - 打开浏览器，访问微信开发者工具下载页面
   - 网址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

2. **选择版本下载**
   - 根据操作系统选择对应的版本：
     - Windows 用户：点击「Windows 64位」或「Windows 32位」
     - Mac 用户：点击「Mac OS X」版本
   - 下载最新的稳定版本（Stable版本）

3. **安装开发者工具**
   - Windows：双击下载的 .exe 安装包，按照向导提示安装
   - Mac：双击下载的 .dmg 文件，将微信开发者工具拖动到应用程序文件夹

4. **首次启动配置**
   - 打开微信开发者工具
   - 使用手机微信扫描弹出的二维码完成登录
   - 登录后，工具会自动与你的微信账号绑定

5. **验证安装成功**
   - 登录成功后，工具主界面应该正常显示
   - 如果看到「创建项目」或「导入项目」的界面，说明安装成功

### 1.3 获取 AppID

AppID 是小程序的唯一标识符，在开发过程中会用到。

**获取步骤：**

1. **登录微信公众平台**
   - 访问 https://mp.weixin.qq.com
   - 使用注册时使用的邮箱和密码登录

2. **查找 AppID**
   - 登录后在首页即可看到 AppID
   - 或者进入「开发管理」→「开发设置」页面查看
   - AppID 格式示例：wx1234567890abcdef（共18位）

3. **记录保存 AppID**
   - 建议将 AppID 复制保存到本地文件
   - 后续在开发者工具创建项目时需要使用

**注意事项：**

- 如果暂时没有正式 AppID，可以使用测试号
- 测试号获取方法：在开发者工具中点击「测试号」按钮
- 测试号仅限开发调试，不能用于正式发布

### 1.4 配置项目

打开微信开发者工具后，需要创建或导入项目。

**具体操作：**

1. **打开开发者工具**
   - 双击桌面「微信开发者工具」图标打开
   - 使用微信扫码登录

2. **导入项目**
   - 在欢迎界面选择「导入项目」
   - 或者点击「+」号创建新项目

3. **填写项目信息**
   - 目录：选择你的项目路径 d:\GitCode\show2\wechat_todolist
   - AppID：填写你的小程序 AppID（或使用测试号）
   - 项目名称：填写「待办事项」或自定义名称
   - 勾选「使用云开发」（可选，如果需要云功能）

4. **完成导入**
   - 点击「确定」按钮
   - 工具会自动编译项目，右侧模拟器会显示小程序界面

5. **验证项目**
   - 检查模拟器是否正常显示
   - 尝试点击按钮，查看功能是否正常
   - 打开「控制台」面板，查看是否有错误信息

## 第二章 开发阶段

### 2.1 本地开发与调试

在开发阶段，建议按照以下流程进行：

**本地调试操作步骤：**

1. **熟悉开发者工具界面**
   - 左侧：模拟器区域，显示小程序界面
   - 右侧：代码编辑器区域
   - 底部：控制台、Storage、Network 等面板
   - 顶部：工具栏，包含编译、预览、真机调试等按钮

2. **模拟器调试**
   - 选择机型：在模拟器顶部选择 iPhone 12/13/14 等不同尺寸
   - 切换平台：可以切换到 Android 平台预览
   - 网络环境：可以模拟 4G、WiFi 等不同网络环境

3. **代码修改与预览**
   - 在右侧编辑器中修改代码
   - 保存文件（Ctrl+S 或自动保存）
   - 模拟器会自动刷新显示修改效果
   - 如果未自动刷新，点击顶部「编译」按钮强制刷新

4. **控制台调试**
   - 点击底部「控制台」面板
   - 查看程序运行日志（使用 wx.log 或 console.log 输出）
   - 查看错误信息和警告
   - 错误堆栈信息可以帮助定位问题代码位置

5. **数据存储调试**
   - 点击底部「Storage」面板
   - 查看当前存储的所有数据
   - 可以手动添加、修改、删除数据
   - 测试数据在不同情况下的表现

6. **页面路径调试**
   - 在模拟器顶部的地址栏可以直接输入页面路径
   - 格式：pages/index/index?param=value
   - 用于测试带参数的页面跳转

**调试技巧：**

- 使用 wx.showToast 显示临时提示信息
- 使用 console.log 打印关键变量值
- 在关键位置添加 try-catch 捕获异常
- 使用「编译模式」指定启动页面和参数

### 2.2 真机调试

在模拟器调试通过后，需要在真机上进行测试。

**真机调试操作步骤：**

1. **环境准备**
   - 确保电脑和手机连接在同一个 WiFi 网络
   - 确保手机已安装微信（最新版本）
   - 确保开发者已添加到小程序的开发者列表中

2. **启动真机调试**
   - 在微信开发者工具中，点击顶部工具栏的「真机调试」按钮
   - 或者使用快捷键：Ctrl+Shift+T（Windows）/ Cmd+Shift+T（Mac）

3. **生成调试二维码**
   - 点击「真机调试」后，工具会自动编译代码
   - 编译完成后，会弹出一个二维码窗口
   - 二维码有效期为 30 分钟

4. **手机扫码连接**
   - 打开手机微信，点击右上角「+」，选择「扫一扫」
   - 扫描电脑屏幕上的二维码
   - 首次扫码，手机会提示「是否允许调试」，点击「允许」

5. **真机调试界面**
   - 扫码成功后，手机会自动打开小程序
   - 开发者工具底部会显示「远程调试」窗口
   - 可以看到「控制台」和「Sources」面板

6. **查看真机日志**
   - 在「控制台」面板查看手机端的日志输出
   - 在「Sources」面板查看和调试源代码
   - 可以设置断点、单步执行

7. **结束调试**
   - 在开发者工具中点击「结束调试」按钮
   - 或者关闭二维码窗口
   - 手机上的调试小程序会自动关闭

**常见问题：**

- 扫码失败：确保手机和电脑在同一 WiFi 网络
- 调试无响应：检查手机微信版本是否为最新
- 工具崩溃：重启开发者工具

### 2.3 代码检查

在真机调试通过后，建议进行以下全面检查：

**代码检查清单：**

1. **页面检查**
   - [ ] 首页是否正常显示
   - [ ] 所有页面是否都能正常打开
   - [ ] 页面布局在不同机型上是否正常
   - [ ] 页面加载速度是否可接受

2. **功能检查**
   - [ ] 所有按钮点击是否有效
   - [ ] 表单提交是否正常
   - [ ] 页面跳转是否正确
   - [ ] 是否有页面无法返回
   - [ ] 加载状态是否显示正确

3. **数据检查**
   - [ ] 数据存储是否成功
   - [ ] 刷新页面后数据是否保留
   - [ ] 删除数据后列表是否更新
   - [ ] 边界数据（如空数据）是否正常处理

4. **网络检查**
   - [ ] 所有网络请求是否成功
   - [ ] 请求参数是否正确
   - [ ] 错误提示是否友好
   - [ ] 超时处理是否合理

5. **兼容性检查**
   - [ ] iOS 系统是否正常
   - [ ] Android 系统是否正常
   - [ ] 不同屏幕尺寸是否适配
   - [ ] 微信版本是否兼容

6. **性能检查**
   - [ ] 页面加载时间是否过长
   - [ ] 列表滑动是否流畅
   - [ ] 是否有内存泄漏
   - [ ] 图片加载是否优化

## 第三章 提交审核前准备

### 3.1 完善小程序信息

在提交审核前，需要完善小程序的基本信息。

**操作步骤：**

1. **登录微信公众平台**
   - 访问 https://mp.weixin.qq.com
   - 使用小程序账号登录

2. **进入设置页面**
   - 点击左侧菜单「设置」
   - 选择「基本设置」

3. **填写小程序名称**
   - 小程序名称是用户搜索和识别的重要标识
   - 名称要求：
     - 4-30个字符
     - 不得与已注册小程序名称重复
     - 不得包含敏感词汇
     - 不得使用误导性名称
   - 填写后点击「保存」
   - 注意：每年只有2次修改机会

4. **上传小程序图标**
   - 点击「上传图标」按钮
   - 选择图片文件（格式：PNG/JPG）
   - 建议尺寸：144x144 像素
   - 图片要求：正方形、清晰、不得有水印
   - 审核通过后无法修改

5. **选择服务类目**
   - 点击「添加类目」按钮
   - 根据小程序功能选择合适的类目
   - 常见类目示例：
     - 「工具」- 「效率」
     - 「生活服务」- 「生活便民」
     - 「教育」- 「教育培训」
   - 部分类目需要上传资质证明

6. **填写小程序简介**
   - 在简介输入框中填写
   - 限制：120个字符以内
   - 内容要求：清晰描述小程序功能
   - 示例：「一个简单实用的待办事项管理工具，帮助您记录和追踪日常任务」

7. **提交审核**
   - 点击「保存」按钮保存所有设置
   - 名称和图标修改后需要重新审核
   - 审核时间通常为 1-2 天

### 3.2 配置服务器域名

如果小程序涉及网络请求，需要配置服务器域名。

**操作步骤：**

1. **登录微信公众平台**
   - 访问 https://mp.weixin.qq.com
   - 进入「开发管理」→「开发设置」

2. **找到服务器域名配置**
   - 向下滚动找到「服务器域名」配置区域

3. **配置各类域名**
   - request 合法域名：小程序请求的 API 地址
   - socket 合法域名：WebSocket 连接地址
   - uploadFile 合法域名：文件上传地址
   - downloadFile 合法域名：文件下载地址

4. **填写域名信息**
   - 点击「修改」按钮
   - 输入域名（不含 https:// 前缀）
   - 格式示例：api.example.com
   - 可以添加多个域名，用换行分隔

5. **域名要求**
   - 域名必须经过 ICP 备案
   - 必须使用 HTTPS 协议
   - 每月最多修改 50 次

6. **保存配置**
   - 点击「保存」按钮
   - 配置立即生效，无需审核

**无需配置的情况：**

- 使用云开发功能
- 只使用 wx.setStorageSync 本地存储
- 只使用 wx.login 获取登录凭证

### 3.3 配置业务域名

如果小程序需要使用 web-view 组件加载外部网页，需要配置业务域名。

**操作步骤：**

1. **登录微信公众平台**
   - 进入「开发管理」→「开发设置」

2. **找到业务域名配置**
   - 向下滚动找到「业务域名」配置区域

3. **添加业务域名**
   - 点击「修改」按钮
   - 输入需要使用的网页域名
   - 格式示例：docs.example.com

4. **域名验证**
   - 首次添加需要下载验证文件
   - 将验证文件上传到域名根目录
   - 验证文件地址：https://域名/wxorgfile/xxx.txt
   - 验证通过后，域名即可使用

5. **域名要求**
   - 必须经过 ICP 备案
   - 每个小程序最多 20 个业务域名
   - 每月最多修改 5 次

### 3.4 申请资质证书

根据小程序的服务类目，可能需要提供相应的资质证书。

**常见资质要求：**

| 服务类目 | 所需资质 |
|---------|---------|
| 医疗/健康 | 医疗机构执业许可证 |
| 金融 | 金融业务许可证 |
| 电商 |  ICP 备案 + 营业执照 |
| 社交 | 增值电信业务经营许可证 |
| 视频 | 广播电视节目制作经营许可证 |

**申请步骤：**

1. **查看所需资质**
   - 进入「设置」→「基本设置」
   - 查看「服务类目」中标注的资质要求

2. **准备资质材料**
   - 企业营业执照
   - 相关行业许可证
   - 法人身份证
   - ICP 备案截图

3. **上传资质**
   - 点击「上传资质」按钮
   - 上传资质文件图片（jpg/png）
   - 填写资质编号和有效期

4. **等待审核**
   - 资质审核通常需要 1-3 个工作日
   - 审核结果会通过站内信通知

**无资质解决方案：**

- 选择不需要资质的类目
- 简化小程序功能，避免涉及受限业务
- 使用个人主体开发简单的工具类小程序

## 第四章 代码上传

### 4.1 版本管理

在上传代码前，需要填写版本信息。

**版本号命名规范：**

版本号建议使用「语义化版本号」格式：主版本号.次版本号.修订号

- 主版本号：重大功能更新或架构变更（例：1.0.0 → 2.0.0）
- 次版本号：新增功能或重要改进（例：1.0.0 → 1.1.0）
- 修订号：Bug 修复或小幅优化（例：1.0.0 → 1.0.1）

**版本号示例：**

| 版本号 | 含义 |
|-------|------|
| 1.0.0 | 首次发布版本 |
| 1.0.1 | 修复了部分 Bug |
| 1.1.0 | 新增了搜索功能 |
| 2.0.0 | 重大版本更新 |

**项目备注填写建议：**

项目备注用于说明本次更新的内容，方便后续版本管理。填写要点：

- 简要说明修复的问题
- 列出新增的功能
- 说明性能优化内容
- 保持简洁，100字以内

**示例备注：**
- 「修复了任务删除后列表不刷新的问题」
- 「新增任务分类功能，优化界面样式」
- 「优化加载性能，修复已知 Bug」

### 4.2 上传操作

**详细操作步骤：**

1. **准备上传**
   - 确保所有代码已保存
   - 确保没有未修复的错误
   - 确保本地测试全部通过

2. **点击上传按钮**
   - 在微信开发者工具顶部工具栏
   - 点击「上传」按钮
   - 位置在「编译」按钮右侧

3. **填写版本信息**
   - 弹出「上传代码」对话框
   - 版本号：填写如「1.0.0」（必填）
   - 项目备注：填写更新说明（选填）

4. **确认上传**
   - 点击「上传」按钮确认
   - 工具开始编译代码

5. **编译过程**
   - 自动检查代码语法错误
   - 自动压缩代码（如果开启压缩）
   - 显示编译进度

6. **上传结果**
   - 成功：显示「上传成功」提示
   - 失败：显示具体错误信息

**常见上传错误及解决方法：**

| 错误类型 | 错误信息 | 解决方法 |
|---------|---------|---------|
| 语法错误 | Unexpected token | 检查代码语法，修复错误行 |
| 缺失文件 | app.json not found | 确保所有必要文件存在 |
| API 废弃 | xxx is deprecated | 使用新的 API 替代 |
| 权限错误 | Permission denied | 检查项目配置是否正确 |
| 域名错误 | domain not in whitelist | 配置合法服务器域名 |

7. **验证上传结果**
   - 登录微信公众平台
   - 进入「版本管理」页面
   - 查看刚上传的版本
   - 状态显示为「待审核」

### 4.3 代码保护（可选）

如果需要对代码进行保护，可以考虑以下措施：

1. **代码混淆**
   - 微信开发者工具默认会压缩代码
   - 可以在 project.config.json 中配置压缩选项

2. **禁止调试**
   - 在 app.json 中配置：
     ```json
     "permission": {
       "debug": false
     }
     ```
   - 注意：这只影响普通用户，开发者仍可调试

3. **安全建议**
   - 不要在小程序中存放敏感信息
   - 重要逻辑放在服务器端
   - 定期更新代码和密钥

## 第五章 提交审核

### 5.1 提交审核

代码上传成功后，需要提交审核才能发布。

**详细操作步骤：**

1. **进入版本管理**
   - 登录微信公众平台
   - 进入左侧菜单「版本管理」
   - 可以看到刚上传的版本

2. **查看上传版本**
   - 版本列表中显示最新上传的版本
   - 版本信息包括：版本号、上传时间、审核状态
   - 点击版本可以查看详情

3. **提交审核**
   - 找到需要审核的版本
   - 点击版本右侧的「提交审核」按钮
   - 弹出审核信息填写页面

4. **填写审核信息**
   - **小程序页面**：会自动列出所有页面
     - 确认所有页面都是完整可用的
     - 如果有不需要审核的页面，可以排除
   - **测试账号**（选填）：
     - 如果小程序需要登录
     - 填写测试账号和密码
     - 格式：用户名/密码
   - **审核备注**（选填）：
     - 填写对审核人员的说明
     - 示例：「测试账号：test/123456，功能演示请查看 README」

5. **确认提交**
   - 核对填写的信息
   - 点击「确认提交」按钮
   - 提交成功后，版本状态变为「审核中」

### 5.2 审核时间与状态

**审核周期：**

| 审核类型 | 预计时间 |
|---------|---------|
| 普通审核 | 1-7 个工作日 |
| 首次审核 | 3-7 个工作日 |
| 复审（被拒后） | 1-3 个工作日 |

**审核状态说明：**

```
┌─────────────────────────────────────────────────────────────┐
│                      审核状态流程                            │
└─────────────────────────────────────────────────────────────┘

  上传成功 ──▶ 待审核 ──▶ 审核中 ──▶ 审核通过
                        │
                        ├──▶ 审核被拒 ──▶ 修改代码 ──▶ 重新提交
                        │
                        └──▶ 需补充材料 ──▶ 补充材料 ──▶ 继续审核

```

**状态详解：**

| 状态 | 含义 | 说明 |
|-----|------|-----|
| 待审核 | 已提交，等待分配审核员 | 通常 1-2 天内会开始审核 |
| 审核中 | 正在审核中 | 耐心等待，不要重复提交 |
| 审核通过 | 审核通过 | 可以随时发布 |
| 审核被拒 | 审核未通过 | 需要根据原因修改 |
| 需补充材料 | 需要提供更多信息 | 按要求补充后继续审核 |

**查看审核进度：**

- 在「版本管理」页面可以查看当前状态
- 点击版本详情可以查看审核进度
- 审核通过/被拒会收到站内信通知

### 5.3 常见审核被拒原因

**详细被拒原因及解决方案：**

1. **功能不完善**
   - **被拒原因**：小程序功能过于简单，无法满足用户需求
   - **示例**：页面只有 Hello World
   - **解决方案**：
     - 完善核心功能
     - 添加多个页面
     - 增加用户价值

2. **诱导分享**
   - **被拒原因**：存在诱导用户分享的行为
   - **示例**：「分享后可解锁功能」「分享得红包」
   - **解决方案**：
     - 删除诱导分享文案
     - 移除分享奖励机制
     - 仅保留正常分享功能

3. **类目不符**
   - **被拒原因**：选择的服务类目与实际功能不符
   - **示例**：选择「工具」类目但实际是社交功能
   - **解决方案**：
     - 修改服务类目为实际功能匹配
     - 或修改小程序功能以匹配类目

4. **资质缺失**
   - **被拒原因**：缺少必要的资质证明
   - **示例**：医疗类目没有上传执业许可证
   - **解决方案**：
     - 补充所需的资质证书
     - 或更换为不需要资质的类目

5. **侵权问题**
   - **被拒原因**：名称、图标、内容涉及侵权
   - **示例**：使用知名商标、盗版内容
   - **解决方案**：
     - 修改侵权内容
     - 使用原创或已授权的内容
     - 更换小程序名称和图标

6. **虚拟支付**
   - **被拒原因**：个人主体小程序存在虚拟商品购买
   - **示例**：会员充值、虚拟道具购买
   - **解决方案**：
     - 个人主体禁止虚拟支付
     - 移除付费功能
     - 升级为企业主体

7. **空白页面**
   - **被拒原因**：存在空白页面或无内容页面
   - **示例**：页面打开后没有内容显示
   - **解决方案**：
     - 删除无用的页面
     - 或完善页面内容

8. **严重 Bug**
   - **被拒原因**：程序存在崩溃、严重错误
   - **示例**：点击按钮闪退
   - **解决方案**：
     - 修复所有 Bug
     - 充分测试后再提交

**审核被拒后的处理流程：**

```
┌─────────────────────────────────────────────────────────────────┐
│                     审核被拒处理流程                              │
└─────────────────────────────────────────────────────────────────┘

  收到被拒通知 ──▶ 查看被拒原因 ──▶ 分析问题 ──▶ 修复代码
        │              │              │              │
        ▼              ▼              ▼              ▼
    查看站内信     明确具体问题     制定修改方案     修改代码
        │              │              │              │
        └──────────────┴──────────────┴──────────────┘
                           │
                           ▼
                      重新上传提交
                           │
                           ▼
                      等待再次审核
```

**申诉流程（可选）：**

如果认为审核结果有误，可以进行申诉：

1. 在审核详情页面点击「申诉」按钮
2. 填写申诉理由和证据
3. 提交申诉，等待处理结果

## 第六章 发布上线

### 6.1 发布版本

审核通过后，就可以正式发布小程序了。

**详细发布步骤：**

1. **确认审核通过**
   - 登录微信公众平台
   - 进入「版本管理」页面
   - 确认版本状态显示为「审核通过」

2. **查看版本信息**
   - 点击审核通过的版本
   - 核对版本号是否正确
   - 确认功能无误

3. **发布前确认清单**
   - [ ] 版本号正确
   - [ ] 功能测试通过
   - [ ] 没有紧急 Bug
   - [ ] 已准备好运营策略
   - [ ] 客服人员已就位

4. **点击发布按钮**
   - 在版本右侧找到「发布」按钮
   - 点击「发布」按钮
   - 弹出确认对话框

5. **确认发布**
   - 仔细阅读发布说明
   - 点击「确认发布」按钮
   - 等待发布完成

6. **发布完成**
   - 状态变为「已发布」
   - 收到发布成功通知
   - 小程序对所有用户可见

**发布注意事项：**

- 发布后不可撤销，请谨慎操作
- 建议在用户活跃度较低的时段发布
- 如凌晨 2-6 点或周末
- 保留旧版本备份，以防需要回滚

### 6.2 灰度发布

对于用户量较大的小程序，建议使用灰度发布功能。

**灰度发布操作步骤：**

1. **找到已审核版本**
   - 进入「版本管理」页面
   - 找到审核通过的版本

2. **选择灰度发布**
   - 点击版本旁的「灰度发布」按钮
   - 进入灰度配置页面

3. **配置灰度比例**
   - **按比例灰度**：
     - 选择灰度比例：10%、20%、50%
     - 百分之多少的用户会收到新版本
   - **按用户标签灰度**（高级）：
     - 新建用户标签
     - 设置标签用户收到新版本
     - 其他用户仍使用旧版本

4. **设置灰度规则**
   - 填写灰度说明
   - 设置灰度时间（可选）
   - 配置监控指标

5. **启动灰度**
   - 点击「开始灰度」按钮
   - 灰度发布开始生效

6. **监控灰度数据**
   - 定期查看灰度数据
   - 关注以下指标：
     - 错误率变化
     - 崩溃率变化
     - 用户反馈数量
     - 转化率变化

7. **灰度结果处理**
   - **灰度无问题**：点击「全量发布」
   - **灰度有问题**：点击「结束灰度」，回滚到旧版本

**灰度发布监控指标：**

| 指标 | 正常范围 | 异常处理 |
|-----|---------|---------|
| 错误率 | < 0.1% | 停止灰度，回滚代码 |
| 崩溃率 | < 0.01% | 停止灰度，修复 Bug |
| 用户反馈 | < 5% | 分析反馈内容 |
| 性能指标 | 无明显下降 | 优化性能 |

### 6.3 版本回滚

如果新版本发布后出现严重问题，需要回滚到之前的版本。

**回滚操作步骤：**

1. **发现问题**
   - 用户反馈严重问题
   - 监控发现异常数据
   - 收到崩溃报告

2. **确认回滚必要性**
   - 影响范围评估
   - 问题严重程度
   - 是否有快速修复方案

3. **执行回滚**
   - 进入「版本管理」页面
   - 找到之前的稳定版本
   - 点击「回退」按钮
   - 确认回退操作

4. **回退确认**
   - 阅读回退说明
   - 点击「确认回退」
   - 等待回退完成

5. **回退后处理**
   - 分析问题原因
   - 修复代码
   - 测试验证
   - 重新提交审核

**回滚注意事项：**

- 回滚只能回退到已发布的旧版本
- 回滚后新版本会从列表中移除
- 建议保留每个正式版本的备份
- 回滚记录要详细记录

**版本管理最佳实践：**

```
推荐版本管理流程：

1.0.0 ──▶ 1.0.1 ──▶ 1.0.2 ──▶ 1.1.0
  │        │        │        │
  发布     Bug修复   Bug修复   新功能
           │        │
           └────────┴──▶ 灰度测试
                            │
                            ▼
                      1.1.0 全量发布
                            │
                            ▼
                      1.1.1 Bug修复
```

## 第七章 发布后管理

### 7.1 数据分析

小程序发布后，可以通过数据统计了解小程序运营情况。

**数据查看步骤：**

1. **进入数据统计**
   - 登录微信公众平台
   - 点击左侧菜单「数据统计」

2. **选择统计维度**
   - **实时统计**：查看实时访问数据
   - **访问分析**：页面访问量、访问来源
   - **用户分析**：新增用户、活跃用户、用户画像
   - **来源分析**：用户从哪些渠道进入

3. **关键数据指标**

| 指标 | 含义 | 关注度 |
|-----|------|-----|
| 访问人数 | 打开小程序的用户数 | 高 |
| 访问次数 | 打开小程序的次数 | 中 |
| 新增用户 | 首次访问的用户数 | 高 |
| 活跃用户 | 有访问行为的用户数 | 高 |
| 留存率 | 再次访问的用户比例 | 高 |
| 访问时长 | 用户平均停留时间 | 中 |
| 跳出率 | 立即离开的用户比例 | 中 |

4. **数据分析报告**
   - 定期导出数据报告
   - 分析用户行为
   - 优化产品功能
   - 调整运营策略

**数据分析工具：**

- 微信公众平台内置统计
- 小程序数据助手（微信小程序）
- 第三方数据统计平台

### 7.2 用户反馈处理

用户反馈是小程序改进的重要来源。

**反馈渠道：**

1. **小程序内反馈**
   - 用户点击「反馈与投诉」提交反馈
   - 在公众平台「用户反馈」页面查看

2. **客服消息**
   - 用户通过小程序客服发送消息
   - 使用客服工具或公众号后台回复

3. **用户评价**
   - 用户可以在小程序评价页面打分
   - 定期查看用户评分和评价

**反馈处理流程：**

```
收到反馈 ──▶ 分类整理 ──▶ 问题核实 ──▶ 处理解决 ──▶ 反馈用户
    │          │          │          │          │
    ▼          ▼          ▼          ▼          ▼
  站内信     功能/Bug    确认问题    开发修复    通知用户
            建议/咨询    评估影响    客服回复
```

**反馈处理建议：**

- 及时响应用户反馈（24小时内）
- 重要问题优先处理
- 定期汇总常见问题
- 将反馈纳入产品迭代计划

### 7.3 版本更新

小程序支持热更新，用户无需重新下载安装包。

**更新流程：**

1. **开发新版本**
   - 在开发者工具中修改代码
   - 添加新功能或修复 Bug

2. **上传新版本**
   - 点击「上传」按钮
   - 填写新的版本号（如 1.1.0 → 1.1.1）
   - 填写更新说明

3. **提交审核**
   - 提交新版本审核
   - 填写必要的审核信息
   - 等待审核通过

4. **发布新版本**
   - 审核通过后发布
   - 发布后用户自动获取新版本

**紧急更新流程：**

如果是紧急 Bug 修复，可以申请加速审核：

1. 在提交审核时选择「加急审核」
2. 填写加急原因和说明
3. 审核周期可缩短至数小时

**更新通知：**

- 小程序更新不会主动通知用户
- 用户再次打开时自动更新
- 可以通过公告功能通知用户新功能

### 7.4 账号安全

保护好小程序账号的安全非常重要。

**安全措施：**

1. **权限管理**
   - 进入「设置」→「成员管理」
   - 设置不同角色的权限
   - 管理员：最高权限
   - 运营者：可运营管理
   - 开发者：可开发调试
   - 仅开放必要权限

2. **登录保护**
   - 开启登录保护
   - 设置登录验证方式
   - 定期检查登录设备

3. **密码安全**
   - 使用强密码
   - 定期更换密码
   - 不要使用相同密码

4. **敏感信息保护**
   - AppID 和 AppSecret 不要泄露
   - 不要上传到公开代码仓库
   - 仅在必要场景使用

5. **定期备份**
   - 定期备份重要数据
   - 保留代码历史版本
   - 记录关键配置信息

**安全检查清单：**

| 检查项 | 检查频率 | 操作 |
|-------|---------|------|
| 登录设备检查 | 每周 | 移除不明设备 |
| 成员权限检查 | 每月 | 清理离职人员 |
| 密码更换 | 每季度 | 更新登录密码 |
| 密钥更换 | 每半年 | 更换 AppSecret |
| 备份数据 | 每周 | 导出重要数据 |

**账号被盗应急处理：**

1. 立即修改登录密码
2. 检查并移除未知设备
3. 检查小程序内容是否被篡改
4. 如有资金损失，立即联系微信客服
5. 报警处理（必要时）

## 常见问题解答

问：审核需要多长时间？
答：一般 1-7 个工作日，首次提交可能需要更长时间。紧急情况可以申请加速审核。

问：个人主体小程序有哪些限制？
答：个人主体小程序不支持虚拟支付、订阅、消息推送等功能，部分类目不对个人开放。

问：如何修改小程序名称？
答：每年有 2 次修改机会，在「设置」「基本设置」中修改。

问：发布后多久用户能看到新版本？
答：发布后，用户再次打开小程序时会自动加载新版本，通常在几分钟内生效。

问：审核被拒了怎么办？
答：根据被拒原因修改代码和信息后，重新提交审核。可以在「审核详情」中查看具体被拒原因。

问：可以同时存在多个版本吗？
答：开发工具可以有多个开发版本；线上只能有一个正式版本；灰度发布时可以有一个灰度版本。

问：忘记 AppID 怎么办？
答：登录微信公众平台，在「首页」或「开发设置」中可以查看 AppID。

问：上传代码时提示语法错误怎么办？
答：打开开发者工具的控制台，查看具体错误位置和原因，修复后重新上传。

问：真机调试连接不上怎么办？
答：检查手机和电脑是否在同一 WiFi 网络，尝试重启开发者工具和微信。

问：服务器域名配置提示 HTTPS 错误怎么办？
答：确保域名已配置 HTTPS 证书，微信小程序只支持 HTTPS 请求。

问：如何查看小程序的访问数据？
答：登录微信公众平台，进入「数据统计」页面可以查看详细的访问数据。

问：发布后还能修改内容吗？
答：可以，修改后重新上传、提交审核、发布即可。

问：一个小程序可以添加多少个管理员？
答：最多可以添加 15 个管理员账号。

问：如何删除小程序？
答：小程序不支持自行删除，如需注销，需要联系微信客服处理。

## 附录一：快速发布清单

### 发布前检查清单

**代码检查：**
- [ ] 所有功能已测试通过
- [ ] 没有控制台错误
- [ ] 数据存储功能正常
- [ ] 网络请求配置正确
- [ ] 边界情况已处理

**信息检查：**
- [ ] 小程序名称已设置
- [ ] 图标已上传并审核通过
- [ ] 服务类目已选择
- [ ] 简介已填写
- [ ] 服务器域名已配置（如需要）

**版本信息：**
- [ ] 版本号已确定
- [ ] 更新说明已编写
- [ ] 代码已上传
- [ ] 审核已通过

**发布准备：**
- [ ] 发布时间已确定
- [ ] 客服人员已就位
- [ ] 监控告警已配置
- [ ] 回滚方案已准备

## 附录二：你的小程序特殊情况说明

针对你开发的 todolist 小程序，以下是特殊说明：

**无需配置的内容：**
- 服务器域名：你的小程序使用本地存储（wx.setStorageSync），不需要配置服务器域名
- 业务域名：没有使用 web-view 组件，不需要配置

**建议设置：**
- 小程序名称：待办事项
- 服务类目：工具 → 效率
- 小程序简介：一个简单实用的待办事项管理工具

**版本号建议：**
- 首次发布：1.0.0
- 功能完善后：1.1.0
- Bug 修复：1.0.1

## 附录三：常用快捷键

### 微信开发者工具快捷键

| 功能 | Windows | Mac |
|-----|--------|-----|
| 编译 | Ctrl+B | Cmd+B |
| 预览 | Ctrl+P | Cmd+P |
| 真机调试 | Ctrl+Shift+T | Cmd+Shift+T |
| 上传 | Ctrl+U | Cmd+U |
| 保存 | Ctrl+S | Cmd+S |
| 格式化代码 | Shift+Alt+F | Shift+Option+F |
| 查找 | Ctrl+F | Cmd+F |
| 替换 | Ctrl+H | Cmd+Option+F |

## 附录 重要网址汇总

微信公众平台：https://mp.weixin.qq.com

微信开发者工具下载：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

小程序开发文档：https://developers.weixin.qq.com/miniprogram/dev/framework/

小程序设计指南：https://developers.weixin.qq.com/miniprogram/design/

审核规范：https://developers.weixin.qq.com/miniprogram/product/reject.html

小程序数据助手下载：https://developers.weixin.qq.com/miniprogram/dev/tools/data-assistant.html

## 结语

本说明书详细介绍了微信小程序从注册到发布的完整流程。按照以上步骤操作，你应该能够顺利完成小程序的上线工作。如果在操作过程中遇到问题，可以查阅官方文档或联系微信客服获取帮助。

祝你开发顺利，小程序发布成功！

---

**文档版本：** 1.0
**最后更新：** 2026年2月13日
**适用对象：** 微信小程序开发者